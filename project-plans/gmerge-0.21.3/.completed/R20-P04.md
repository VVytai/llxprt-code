# R20-P04 â€” Config registry plumbing (Worker)

- Timestamp (UTC): 2026-02-21T18:24:30Z
- Phase: P04 (Worker)
- Plan: `project-plans/gmerge-0.21.3/560550f5df78-plan.md`

## Scope
Add ResourceRegistry lifecycle wiring to Config and expose a getter.

## TDD evidence

### RED (tests first, before config implementation)
Command:

    npm run test --workspace @vybestack/llxprt-code-core -- src/config/config.test.ts

Key failing output:

- Failed test: `Server Config (config.ts) > initialize > should initialize and expose a ResourceRegistry instance`
- Assertion: `expected undefined to be type of 'function'`
- Location: `src/config/config.test.ts:280`
- Summary: `1 failed | 79 passed (80)`

### GREEN (after minimal implementation)
Command:

    npm run test --workspace @vybestack/llxprt-code-core -- src/config/config.test.ts

Key output:

- `[OK] src/config/config.test.ts (80 tests)`
- `Test Files 1 passed (1)`
- `Tests 80 passed (80)`

### Typecheck
Command:

    npm run typecheck --workspace @vybestack/llxprt-code-core

Key output:

- `tsc --noEmit`
- Exit code `0`

## Files changed
- `packages/core/src/config/config.test.ts` (new initialize test for resource registry)
- `packages/core/src/config/config.ts` (import, field, initialize wiring, getter)

## Notes
- Changes are intentionally limited to config registry plumbing (P04).
