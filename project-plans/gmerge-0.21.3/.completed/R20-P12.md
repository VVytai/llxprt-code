# R20-P12 â€” MCP status command resource visibility (Worker)

- Timestamp (UTC): 2026-02-21T19:16:50Z
- Phase: P12 (Worker)
- Plan: `project-plans/gmerge-0.21.3/560550f5df78-plan.md`

## Scope delivered
Adapted this branch's `/mcp` status text output (local architecture) to include MCP resources per server.

Implemented behavior in `mcpCommand.ts`:
- Reads all resources from `config.getResourceRegistry().getAllResources()` when available.
- Filters resources by server and includes them in:
  - ready-status summary counts (`resource` / `resources`)
  - detailed server sections under a new `Resources:` heading
- Extends cached-ready heuristic so disconnected servers with cached resources display as READY.
- Updates no-items fallback message to include resources:
  - `No tools, prompts, or resources available`

## TDD evidence

### RED evidence
Command:

    npm run test --workspace @vybestack/llxprt-code -- src/ui/commands/mcpCommand.test.ts

Failing test added first:
- `should include resource counts and resource names in MCP status output`
- Initial failure showed output lacked resource count/details (expected `Ready (1 tool, 1 resource)` and resource entries).

### GREEN evidence
Command:

    npm run test --workspace @vybestack/llxprt-code -- src/ui/commands/mcpCommand.test.ts

Passing summary:
- `[OK] src/ui/commands/mcpCommand.test.ts (36 tests)`
- `Test Files 1 passed (1)`
- `Tests 36 passed (36)`

### Typecheck evidence
Command:

    npm run typecheck --workspace @vybestack/llxprt-code

Result:
- `tsc --noEmit`
- Exit code `0`

## Files changed in this phase
- `packages/cli/src/ui/commands/mcpCommand.ts`
- `packages/cli/src/ui/commands/mcpCommand.test.ts`

## Notes
- Branch does not contain upstream MCP status component implementation; this phase was implemented in local `/mcp` text-rendering path to preserve architecture while meeting R20 behavior.
